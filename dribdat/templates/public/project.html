{% extends "layout.html" %}

{% block page_title %}{{project.name}} ~{{project.event.name}}{% endblock %}

{% block content %}
<div class="jumbotron project-page" style="background-color:#{{project.logo_color}}">
  <div class="project-info">
    {% if project.image_url %}
      <img class="project-image" src="{{project.image_url}}">
    {% endif %}

    <div class="project-tools">
      {% if project.category_id %}
      <a href="{{ url_for('public.event', event_id=project.event.id) }}" class="btn btn-default project-category" style="background-color:#{{project.category.logo_color}}">
        {% if project.category.logo_icon %}
          <i class="fa fa-{{project.category.logo_icon}}"></i><br>
        {% endif %}
        <span>{{ project.category.name }}</span>
      </a><br>
      {% endif %}

      <div class="progress" title="A score based on profile completeness and voting results">
        <div class="progress-bar" role="progressbar" aria-valuenow="{{project.score}}" aria-valuemin="0" aria-valuemax="70">
          {{project.score}}
        </div>
      </div>

      {% if current_user and current_user.is_authenticated() %}
      <a href="{{ url_for('public.project_star', project_id=project.id) }}" class="project-star" title="Click to send compliments (you must be logged in)">
        <i class="fa fa-heart"></i>KUDOS!
      </a>
      {% endif %}
    </div>

    <h2 style="font-weight:bold">
      {% if project.logo_icon %}
        <i class="fa fa-{{project.logo_icon}}"></i>
      {% endif %}

      {% if project.user.teamname %}
      <span class="project-team">
        <a href="{{project.user.webpage_url}}" target="_blank">
          {{ project.user.teamname }}
        </a> /
      </span>
      {% endif %}

      {{project.name}}
    </h2>

    {% if github_project %}
      <div data-theme="default" data-height="" data-width="400" data-github="{{ github_project }}" class="github-card"></div>
      <script src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
    {% endif %}

    {% if project.summary %}
    <p class="project-summary">
      {{project.summary}}
    </p>
    {% endif %}
    <br clear="all"><hr>

    <div class="project-longtext">
      {{project.longtext|markdown}}
    </div>
  </div>
  <p class="project-buttons">
    <a href="{{ project.webpage_url }}" class="btn btn-primary">Project homepage &raquo;</a>
    <a href="{{ project.source_url }}" class="btn btn-success">Source code</a>
  </p>
  <div class="panel panel-default community-embed">
    <div class="panel-body"><i class="fa fa-comment"></i>
      {{project.event.community_embed|safe}}
    </div>
  </div>
  <div class="panel panel-default community-embed">
    <div class="panel-body">
      <p class="details">
        Last update:
        <span>{{ project.updated_at|format_date }}</span>
        <br>
        Maintained by:
        <b>{{ project.user.username }}</b>
        {% if current_user and current_user.is_authenticated() and current_user.id == project.user_id %}
          <a href="{{ url_for('public.project_edit', project_id=project.id) }}" class="btn btn-success btn-sm">edit</a>
        {% endif %}
      </p>
      <p class="started-at">
        <small>Launched at <b>{{ project.event.name }}</b></small>
        <a href="{{ url_for('public.event', event_id=project.event.id) }}" class="btn btn-sm btn-default">&laquo; all projects</a>
      </p>
    </div>
  </div>
</div><!-- /.jumbotron -->
{% endblock %}
